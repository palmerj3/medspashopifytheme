<article class="article-template">
  <header class="article-template__header">
    <p class="article-template__meta">{{ article.published_at | date: format: 'month_day_year' }} &bull; {{ article.author }}</p>
    <h1 class="article-template__title">{{ article.title }}</h1>
  </header>
  {% if article.image %}
    <figure class="article-template__image">
      <img src="{{ article.image | image_url: width: 1600 }}" alt="{{ article.image.alt | escape }}">
    </figure>
  {% endif %}
  <div class="article-template__content">{{ article.content }}</div>
  {% if blog.comments_enabled? %}
    <section class="article-template__comments">
      <h2>{{ 'blogs.comments.comments_with_count' | t: count: article.comments_count }}</h2>
      {% form 'new_comment', article %}
        <div class="form-grid">
          <label for="CommentAuthor">{{ 'blogs.comments.name' | t }}</label>
          <input id="CommentAuthor" name="comment[author]" type="text" value="{{ form.author }}" required>
          <label for="CommentEmail">{{ 'blogs.comments.email' | t }}</label>
          <input id="CommentEmail" name="comment[email]" type="email" value="{{ form.email }}" required>
          <label for="CommentBody">{{ 'blogs.comments.message' | t }}</label>
          <textarea id="CommentBody" name="comment[body]" required>{{ form.body }}</textarea>
          <button type="submit" class="btn">{{ 'blogs.comments.post' | t }}</button>
        </div>
        {% if form.errors %}
          <div class="form-error">{{ form.errors | default_errors }}</div>
        {% endif %}
        {% if form.posted_successfully? %}
          <p class="form-success">{{ 'blogs.comments.success' | t }}</p>
        {% endif %}
      {% endform %}
      {% if article.comments_count > 0 %}
        <div class="article-template__comments-list">
          {% paginate article.comments by 10 %}
            {% for comment in article.comments %}
              <div class="comment">
                <p class="comment__meta">{{ comment.author }} &bull; {{ comment.created_at | date: format: 'month_day_year' }}</p>
                <div class="comment__content">{{ comment.content }}</div>
              </div>
            {% endfor %}
            {% render 'pagination', paginate: paginate %}
          {% endpaginate %}
        </div>
      {% endif %}
    </section>
  {% endif %}
</article>

{% schema %}
{
  "name": "Article content",
  "settings": []
}
{% endschema %}
