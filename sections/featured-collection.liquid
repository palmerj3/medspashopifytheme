<section class="featured-collection">
  <div class="featured-collection__header">
    {% if section.settings.eyebrow != blank %}
      <p class="section-eyebrow">{{ section.settings.eyebrow }}</p>
    {% endif %}
    <h2 class="section-heading">{{ section.settings.heading }}</h2>
    {% if section.settings.copy != blank %}
      <p class="section-copy">{{ section.settings.copy }}</p>
    {% endif %}
  </div>
  <div class="featured-collection__grid">
    {% assign collection = collections[section.settings.collection] %}
    {% if collection and collection.products_count > 0 %}
      {% for product in collection.products | limit: section.settings.product_limit %}
        <article class="product-card">
          <a href="{{ product.url }}" class="product-card__media">
            {% if product.featured_image %}
              <img src="{{ product.featured_image | image_url: width: 800 }}" alt="{{ product.featured_image.alt | escape }}" loading="lazy">
            {% endif %}
          </a>
          <div class="product-card__details">
            <h3 class="product-card__title"><a href="{{ product.url }}">{{ product.title }}</a></h3>
            <span class="product-card__price">{{ product.price | money }}</span>
            {% if section.settings.show_quick_add %}
              <form method="post" action="/cart/add" class="product-card__form">
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                <button class="btn btn--ghost" type="submit">{{ 'products.product.add_to_cart' | t }}</button>
              </form>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    {% else %}
      <p>{{ 'sections.featured_collection.no_products' | t }}</p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured collection",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Curated skincare"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Medical-grade essentials"
    },
    {
      "type": "textarea",
      "id": "copy",
      "label": "Copy",
      "default": "Shop the dermatologist-approved formulas featured in our treatment rooms."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "product_limit",
      "label": "Products to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_quick_add",
      "label": "Show quick add",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Featured collection"
    }
  ]
}
{% endschema %}
